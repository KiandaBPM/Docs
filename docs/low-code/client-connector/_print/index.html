<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.107.0"><link rel=canonical type=text/html href=https://docs.kianda.com/docs/low-code/client-connector/><link rel=alternate type=application/rss+xml href=https://docs.kianda.com/docs/low-code/client-connector/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Client Connector | Kianda no-code platform for business process automation</title><meta name=description content="Introduction
The Client connector function allows Kianda users to create customised data source connectors thereby allowing Kianda to push to, use and …"><meta property="og:title" content="Client Connector"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://docs.kianda.com/docs/low-code/client-connector/"><meta itemprop=name content="Client Connector"><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content="Client Connector"><meta name=twitter:description content><link rel=preload href=/scss/main.min.f468a3f7b55a9306db5600256a2260055729248021aa190affaece56e0fc8f4b.css as=style><link href=/scss/main.min.f468a3f7b55a9306db5600256a2260055729248021aa190affaece56e0fc8f4b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-101778157-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg width="124" height="26" viewBox="0 0 124 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M47.0114 22.8609 39.9609 12.543l6.7638-9.80049H41.5085L35.3752 11.4796V2.74251H30.7895V22.8609h4.5857V13.549l6.4199 9.3119h5.2163z" fill="#fff"/><path d="M50.7365 7.22603c1.4044.0 2.5795-1.17836 2.5795-2.58665.0-1.40828-1.1751-2.58665-2.5795-2.58665-1.4043.0-2.5794 1.17837-2.5794 2.58665.0 1.40829 1.1751 2.58665 2.5794 2.58665zM48.587 22.8609h4.2991V8.49062H48.587V22.8609z" fill="#fff"/><path d="M66.4358 8.49062v1.3508C65.49 8.74928 64.0856 8.08825 62.1654 8.08825c-3.7545.0-6.8499 3.30515-6.8499 7.58755.0 4.2823 3.0954 7.5875 6.8499 7.5875C64.0856 23.2633 65.49 22.6022 66.4358 21.5101v1.3508h4.2991V8.49062H66.4358zM63.0252 19.1821c-1.9776.0-3.4106-1.3508-3.4106-3.5063.0-2.1556 1.433-3.5064 3.4106-3.5064s3.4106 1.3508 3.4106 3.5064c0 2.1555-1.43300000000001 3.5063-3.4106 3.5063z" fill="#fff"/><path d="M82.2864 8.08825C80.3948 8.08825 78.9618 8.77802 78.188 9.84142V8.49062H73.8889V22.8609H78.188V15.0147C78.188 12.9741 79.2771 12.0544 80.8534 12.0544 82.2291 12.0544 83.3469 12.8879 83.3469 14.6698v8.1911H87.6459V14.0375c0-3.8799-2.4648-5.94925-5.3595-5.94925z" fill="#fff"/><path d="M101.002 2.74251V9.84142C100.056 8.74928 98.6518 8.08825 96.7316 8.08825 92.977 8.08825 89.8817 11.3934 89.8817 15.6758 89.8817 19.9581 92.977 23.2633 96.7316 23.2633 98.6518 23.2633 100.056 22.6022 101.002 21.5101v1.3508H105.301V2.74251H101.002zM97.5914 19.1821C95.6138 19.1821 94.1808 17.8313 94.1808 15.6758 94.1808 13.5202 95.6138 12.1694 97.5914 12.1694 99.569 12.1694 101.002 13.5202 101.002 15.6758 101.002 17.8313 99.569 19.1821 97.5914 19.1821z" fill="#fff"/><path d="M118.859 8.49062v1.3508C117.913 8.74928 116.509 8.08825 114.588 8.08825 110.834 8.08825 107.739 11.3934 107.739 15.6758c0 4.2823 3.095 7.5875 6.84899999999999 7.5875C116.509 23.2633 117.913 22.6022 118.859 21.5101v1.3508H123.158V8.49062H118.859zM115.448 19.1821c-1.97699999999999.0-3.41-1.3508-3.41-3.5063.0-2.1556 1.43300000000001-3.5064 3.41-3.5064 1.97800000000001.0 3.411 1.3508 3.411 3.5064.0 2.1555-1.43299999999999 3.5063-3.411 3.5063z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.28125C0 2.3645 2.3645.0 5.28125.0H20.7188C23.6355.0 26 2.3645 26 5.28125V20.7188C26 23.6355 23.6355 26 20.7188 26H5.28125C2.3645 26 0 23.6355.0 20.7188V5.28125zM23.4063 7.40596C22.6063 5.00596 12.7397 5.7393 7.90634 6.40596c2.83336.16663 8.89996.89989 10.49996 2.49989 1.6 1.60005-2 6.33335-4 8.50005 3.3334-2.3333 9.8-7.59994 9-9.99994zM18.9742 19.4062C14.1409 20.0729 4.27421 20.8062 3.47421 18.4062c-.8-2.4 5.66667-7.6666 8.99999-9.99986-2 2.16666-5.59999 6.89996-3.99999 8.49996 1.59999 1.6 7.66669 2.3333 10.49999 2.4999z" fill="#fff"/></svg></span><span class="text-uppercase font-weight-bold">Kianda no-code platform for business process automation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://portal.kianda.com/public/signup target=_blank><span>Get Started</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.25ead8d6f866e405b082a25d1c29389c.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/low-code/client-connector/>Return to the regular view of this page</a>.</p></div><h1 class=title>Client Connector</h1><ul><li>1: <a href=#pg-b81143459e15ea583a13ac92b7d1dcdb>How to create a Client Connector</a></li><li>2: <a href=#pg-0e36c2bba8fb2a78a52ddf8919bc1590>Connector API - Swagger</a></li><li>3: <a href=#pg-8b3cea0752e92b2220a28206d9976d4d>Creating a microservice</a></li><li>4: <a href=#pg-cc4025fc31d90a7118b94d44ba054188>Sample schemas</a></li><li>5: <a href=#pg-36fafe16640322444ebf44736c4a8f77>How to use the client connector</a></li></ul><div class=content><h1 id=introduction>Introduction</h1><p>The <strong>Client connector</strong> function allows Kianda users to create customised data source connectors thereby allowing Kianda to push to, use and pull information from external data sources.</p><p><strong>Note</strong>: Client Connectors are now available for use in <strong>beta mode</strong> .</p><p>A set of predefined data connectors are available under <strong>Administration</strong> and <strong>Data sources</strong>, however this new feature found under <strong>Developer resources</strong>, will allow an organisation to build their own connector to any external system beyond the predefined list.</p><p><img src=/images/client-connector.jpg alt="Client connector under Developer resources"></p><p>Please note you must have the correct level of role to <strong>create</strong> and <strong>use</strong> the client connector, where typically <strong>Developers</strong> create the customised connector, while <strong>Designers</strong> use the customised connector in process creation and edit. <strong>Administrators</strong> can implement all activities.</p><h2 id=features>Features</h2><p>The new Client connector function has the following features:</p><ul><li>Customizable data source connector</li><li>Editable UI and JavaScript code similar to custom <a href=/docs/low-code/rule-widget/>rules</a>, <a href=/docs/low-code/dashboard-widget/>dashboard widgets</a> and <a href=/docs/low-code/dashboard-widget/>fields</a></li><li>Ability to alter the query payload</li><li>Add new custom data source settings</li><li>Sensitive data encryption in each call</li></ul><h2 id=whats-next-idea-iconimages18png>What&rsquo;s next <img src=/images/18.png alt="Idea icon"></h2><p>To start creating a Client connector go to <a href=/docs/low-code/client-connector/how-to-create/>Creating a custom connector</a>.</p><p>To create other widgets go to <a href=/docs/low-code/rule-widget/>Custom rule development</a>, <a href=/docs/low-code/field-widget/>Custom field development</a> and <a href=/docs/low-code/dashboard-widget/>Custom dashboard widget</a> pages to find out more.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-b81143459e15ea583a13ac92b7d1dcdb>1 - How to create a Client Connector</h1><h1 id=introduction>Introduction</h1><p>This section will detail how to create a new <strong>Client Connector</strong> which is a customised data connector for your organisation. You may wish to create a test connector to begin with by following the steps below using the demo code provided. More detail will be provided in the how-to-use section.</p><p><strong>Note:</strong> You must be have an <strong>Administrator</strong> or <strong>Developer</strong> role to create a client connector.</p><h2 id=before-you-begin>Before you begin</h2><p>Please note before you begin that there are three key steps that need to be implemented in order to create and use a customised connector.</p><ol><li><p>Microservice - create a <strong>microservice</strong> or use an existing service to perform a metadata query and test actions, click on the <a href=/docs/low-code/client-connector/create-microservice/>Microservice</a> link to get further details.</p></li><li><p>Use Kianda features to create and test your customised connector - use <strong>Developer</strong> to <a href=#create-a-new-connector>create a new connector</a> and use <strong>Data sources</strong> to <a href=#create-a-connector-datasource>create a connector datasource</a> for the newly customised connector.</p></li><li><p>Process - use the custom connector to bring data into a process and use the query hook to filter the data.</p></li></ol><h2 id=create-a-new-connector>Create a new connector</h2><p>To create a new customised connector, follow the steps below:</p><ol><li>From the left-hand <strong>side menu</strong>, go to <strong>Administration</strong> > <strong>Developer</strong> then within the <strong>Connectors</strong> panel click on <strong>New Connector</strong>.</li></ol><p><img src=/images/new-connector.jpg alt="New Connector"></p><ol start=2><li><p>In the <strong>Create Connector</strong> dialog box, add a <strong>Title</strong> and browse for an <strong>Icon URL</strong> for your connector. The <strong>Connector Unique ID</strong> is automatically generated by the system.</p><p><img src=/images/create-connector.jpg alt="Create connector dialog box"></p></li><li><p>Make sure to <strong>copy the secret key</strong> to a safe location where you will find it as it will be needed later. You can do this by a) clicking on <strong>Download TXT</strong> which will result in the Secret Key being downloaded as a CSV file or b) clicking on <strong>Copy Key to Clipboard</strong>, then click on <strong>OK</strong> when done.</p></li><li><p>After populating the initial dialog box, the next screen will show you the title of the connector and contains four tabs: <a href=#connector-settings-tab>Connector Settings</a>, <a href=#settings-ui-tab>Settings UI</a>, <a href=#settings-code-tab>Settings Code</a> and <a href=#query-code-tab>Query Code</a>.</p><p><img src=/images/connector-settings-demo.jpg alt="Tabs to create a customised connector"></p><p>The details of these tabs are found in the following sections.</p></li></ol><h3 id=connector-settings-tab>Connector Settings tab</h3><p>This is where the Connector <strong>Title</strong> and <strong>Icon</strong> can be changed. These details will be seen in the <a href=/docs/platform/connectors/>Data connectors</a> function, once the customised connector is created. The URL for metadata, test and query can be edited here too. The Metadata, Test and Query URL&rsquo;s can be populated when the microservice is created, see <a href=/docs/low-code/client-connector/create-microservice/>Create a Microservice</a> link for more details.</p><p>To save details click on <strong>Update</strong>, then click on <strong>Close</strong> to return to the <strong>Developer resources</strong> page.</p><h3 id=settings-ui-tab>Settings UI tab</h3><p>The <strong>Settings UI</strong> sets the user interface for a customised data connector within the <strong>Data sources</strong> function, found within <strong>Administration</strong> in the left-hand pane. By default there is sample code in this tab. This code will be rendered when the datasource for this connector is activated.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-HTML data-lang=HTML><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;form-group&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>label</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;control-label&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Client Key<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>label</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  {{input type=&#34;text&#34; value=datasource.clientkey class=&#34;form-control&#34;}}
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;form-group&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>label</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;control-label&#34;</span><span style=color:#000;font-weight:700>&gt;</span>Environment<span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>label</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  {{radio-button default=true name=&#39;environment&#39; label=&#39;Demo&#39; value=&#39;demo&#39; group=datasource.settings.environment}}
</span></span><span style=display:flex><span>  {{radio-button name=&#39;environment&#39; label=&#39;Live&#39; value=&#39;live&#39; group=datasource.settings.environment}}
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>div</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;form-group&#34;</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>button</span> <span style=color:#c4a000>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;button&#34;</span> <span style=color:#c4a000>class</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#34;btn btn-primary&#34;</span> <span style=color:#a40000>{{</span><span style=color:#c4a000>action</span> <span style=color:#a40000>&#39;</span><span style=color:#c4a000>authorize</span><span style=color:#a40000>&#39;}}</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>    {{#if datasource.settings.authorized}}
</span></span><span style=display:flex><span>      Re-Authorize
</span></span><span style=display:flex><span>    {{else}}
</span></span><span style=display:flex><span>      Authorize
</span></span><span style=display:flex><span>    {{/if}}
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>button</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>&lt;/</span><span style=color:#204a87;font-weight:700>div</span><span style=color:#000;font-weight:700>&gt;</span>
</span></span></code></pre></div><p>This code creates the content on the screen seen below, available in the <strong>Data sources</strong> function on the <strong>Datasource details</strong> page, within the class <strong>form-group</strong> listed in the code above there is an <strong>Environment</strong> setting with labels &lsquo;Demo&rsquo; and &lsquo;Live&rsquo; which can be seen in the screen below. Also note an <strong>Authorize</strong> button added in the code above which has an action <strong>&lsquo;authorize&rsquo;</strong> which is handled by the code in the <a href=#settings-code-tab>Settings Code tab</a>.</p><p><img src=/images/settings-ui-datasources.jpg alt="Datasources details created from Settings UI tab"></p><p>Other details on the screen above, like the name of the page <strong>Datasource details</strong>, <strong>Use Kianda Cloud Connect</strong> and buttons <strong>Test connection</strong>, <strong>Save</strong>, <strong>Security</strong> and <strong>Close</strong> are automatically part of the UI for customised data connectors. However, custom handlebars can be added for the <strong>settings</strong> of the connector datasource using code in the <strong>Settings UI</strong> tab, namely fields like <strong>Datasource Name</strong> and <strong>Client Key</strong> as shown in the image above. This principles works the same <strong>Widget UI</strong> seen when creating custom <a href=/docs/low-code/rule-widget/>rule widgets</a> or <a href=/docs/low-code/field-widget/>field widgets</a> for example.</p><h3 id=settings-code>Settings Code</h3><p>In a similar manner to creating custom <a href=/docs/low-code/rule-widget/>rule widgets</a> or <a href=/docs/low-code/field-widget/>field widgets</a> where there are <strong>Widget code</strong> tabs, the connector widget has a tab called <strong>Settings Code</strong> which is used to create the JavaScript code for the settings UI.</p><p>By default there is code in this tab, for example the <strong>Authorize</strong> button shown in the <strong>Datasource details</strong> page above has an &lsquo;authorize&rsquo; function which is the first segment of code below. As this sample code, &lsquo;OAuth playground&rsquo; is used as a sandbox.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>actions</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>authorize</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>that</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>isDemo</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;datasource.settings.environment&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>===</span><span style=color:#4e9a06>&#39;demo&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>authUrl</span><span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;https://www.oauth.com/playground/auth-dialog.html?&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>consenturl</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>authUrl</span> <span style=color:#ce5c00;font-weight:700>+</span>  <span style=color:#4e9a06>&#39;response_type=code&#39;</span>
</span></span><span style=display:flex><span>                                <span style=color:#ce5c00;font-weight:700>+</span>  <span style=color:#4e9a06>&#39;&amp;client_id=&#39;</span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#204a87;font-weight:700>this</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;datasource.settings.clientkey&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                                <span style=color:#ce5c00;font-weight:700>+</span>  <span style=color:#4e9a06>&#39;&amp;redirect_uri=https://app.kianda.com/index.html&#39;</span>
</span></span><span style=display:flex><span>                                <span style=color:#ce5c00;font-weight:700>+</span>  <span style=color:#4e9a06>&#39;&amp;scope=photo+offline_access&#39;</span>
</span></span><span style=display:flex><span>                                <span style=color:#ce5c00;font-weight:700>+</span>  <span style=color:#4e9a06>&#39;&amp;state=t4kBXKDIJc4X4gf2&#39;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>authWindow</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>window</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>consenturl</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;_blank&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;height=500,width=700,scrollbars=yes,location=yes&#39;</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>try</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>authWindow</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>focus</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>e</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>$</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>notify</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;Error during authentication, please try again&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>status</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;warning&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>handleCallback</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>evt</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>isDestroyed</span> <span style=color:#ce5c00;font-weight:700>!==</span> <span style=color:#204a87;font-weight:700>true</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>evt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>origin</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indexOf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;kianda.com&#39;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>evt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>){</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>accessCode</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>evt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>scope</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;photo+offline_access&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;datasource.settings.accessCode&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>accessCode</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;datasource.settings.accessToken&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;datasource.settings.refreshToken&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;datasource.settings.authorized&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;datasource.settings.scope&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>scope</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>save</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>then</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>              <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sendAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;test&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>that</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>window</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>removeEventListener</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;message&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>handleCallback</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87>window</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>addEventListener</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;message&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>handleCallback</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Other aspects to note in this sample code are the datasource settings, for example <code>datasource.settings.accessToken</code> and <code>datasource.settings.environment</code> denoting that you can add whatever <strong>settings</strong> you want to the UI within the <strong>Datasources details</strong> page using this type of code. These settings could be then used in a <a href=/docs/low-code/client-connector/create-microservice/>Microservice</a> to create an action based on a chosen setting.</p><h3 id=query-code>Query Code</h3><p>When using a data source, all data sources will have built-in <strong>metadata</strong>, <strong>query</strong> and <strong>querySuccess</strong> functions to allow content searches, including metadata content or information about the content, such as title, author and creation date. The <strong>Query code</strong> tab contains the code needed for these three functions. Default code is provided to help you get started, see below.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>metaData</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tree</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>datasource</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>tree</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>arg2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000>querySuccess</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// this.get(&#34;dataservice&#34;).mapSuccess(result,rule,process); //uncomment to use default mapping behaviour
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The default code contains three <strong>hooks</strong> that allow you to tap in to a module to trigger certain behaviours or actions. These hooks are:</p><ul><li><a href=#metadata-hook>Metadata hook</a></li><li><a href=#query-hook>Query hook</a></li><li><a href=#querysuccess-hook>querySuccess hook</a></li></ul><p>Click on each of the links above to see further details.</p><p>In Ember, <strong>bubbling</strong> will search for each of the actions in the code above, and if not found, then a default action is used, but if found the default is overwritten. This principle is useful when something is created multiple times which is the case when creating custom data connectors.</p><h4 id=metadata-hook>Metadata hook</h4><p>The <strong>Metadata hook</strong> is where the return of the tree or metadata call can be altered for a chosen datasource used in Kianda form design.</p><p>The <strong><code>tree</code>parameter</strong> as part of this hook is seen in the sample code snippet below.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>  <span style=color:#000>metaData</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tree</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>datasource</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>tree</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>This <strong>tree parameter</strong> could be defined and structured as follows using nested objects &lsquo;Get Countries&rsquo; and &lsquo;Get Cities&rsquo; which are associated with <strong>nodes</strong> &lsquo;Country&rsquo; and &lsquo;Country&rsquo; and &lsquo;City&rsquo;. See <a href=https://github.com/jonmiles/bootstrap-treeview#bootstrap-tree-view>Bootstrap Tree View package documentation</a> for more details on hierarchical tree structures.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#a40000>tree:</span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><p>This structure will result in the output as shown in the image below, when a data source is chosen for use in form design that uses a new data connector called &lsquo;Demo Connector&rsquo;.</p><p><img src=/images/trigger-tree-function-copy.jpg alt="Datasource tree and network tab"></p><p>So when the data source is selected, the tree function is triggered as seen in the <strong>Network</strong> tab calls. The function is queried and the response is rendered as a tree view in the <strong>datasource tree</strong> box in Kianda.</p><p>The other parameter named in this <strong>metadata hook</strong>, namely <code>datasource</code> , defines properties used in the data connector settings like Title and Icon for the data connector. A sample schema is available at <a href=/docs/low-code/client-connector/sample-schemas/#datasource-schema>Datasource schema</a>.</p><h3 id=query-hook>Query Hook</h3><p>The <strong>Query hook</strong> allows a query to the datasource to be customised. Parameters are passed into this function to allow customisation to happen. These parameters are: <code>datasource</code>, <code>query</code>, <code>rule</code> and <code>process</code>; sample schemas are available for each at the <a href>Sample schema</a> link.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>arg2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>We will use the countries and cities example scenario to explain the query hook, two list fields datasoure as the value have been set up in a process, the first list field will call the get countries function and when a user selects a country from the list the second list will have a condition to get the cities related to the selected country.</p><p>The below query hook takes in 4 parameters, <a href=#sample-schemas>sample schemas are for each are available here</a>.</p><p>Thinking of the scenario above when a list is populated from a datasource it needs to query the datasource each time, in a standard connector the query is handled by default but in this case the query is going to be handled using our custom connector. Using the passed in parameters we can check for various things such as rules and conditions. in the example below the filter will be captured by drilling into the query conditions and taking the value of the right hand argument or arg2, this should be the country that has been selected in the dropdown, by setting query.filter **we are altering the query before it is executed **.</p><p>This ties in with the <a href=#querysuccess-hook>query success hook</a> which handles the result which is returned from the datasource, which can also be customized.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>	<span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    	<span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>arg2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  	<span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=querysuccess-hook>QuerySuccess hook</h3><p>The idea of the query success hook is to be able to customize the response of a datasource query for example drill into a complicated json response based on a condition.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#000>querySuccess</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// this.get(&#34;dataservice&#34;).mapSuccess(result,rule,process); //uncomment to use default mapping behaviour</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Once the connector is created, the connector is available from the <strong>Data sources</strong> function under <strong>Administration</strong>, see next section for details.</p><h2 id=create-a-connector-datasource>Create a connector datasource</h2><ol><li>From the left-hand side go to <strong>Administration</strong> > <strong>Data sources</strong></li></ol><p>Click <strong>add new</strong> select the newly created connector, in this case the demo connector will be selected.</p><img src=/images/connector-datasource.png style="zoom:80%;border:1px solid #000"><ol start=2><li>Once the datasource is created you will see the datasource details screen, the buttons at the bottom are similar to any other datasource. The section in the middle is what can be customized using the settings UI and settings Code.
<img src=/images/Connector-datasource-created.png style="zoom:100%;border:1px solid #000"></li></ol><h2 id=create-a-microservice>Create a microservice</h2><p>Note that a microservice can be created in any programming language, the examples below are in c#, more languages will be added soon.</p><h3 id=requirements>Requirements</h3><p>The microservice should implement the following 3 functions.</p><ol><li>Test</li><li>MetaData</li><li>Query</li></ol><h3 id=test>Test</h3><p>The test function authenticates the user making the request and creates a token for any further requests to the datasource.</p><p>The steps for the test function are as follows</p><ol><li><p>Get the data from the <a href=#clientconnectorrequest>client connector request</a></p></li><li><p>Decrypt the encrypted settings property bag using your secret key and the <a href=#decrypt-string-with-aes256>Decrypt function</a></p></li><li><p>Authorize the user and create bearer token using oauth for example</p></li><li><p>Add the oauth token to the settings property bag and <a href=#encrypt-string-with-aes256>encrypt</a> using your secret key.</p></li><li><p>Create <a href=#clientconnectorresponse>client connector response</a> and include success message to indicate test succeeded/failed.</p></li><li><p>Sign the response using the <a href=#encrypt-data-with-hmacsha256>EncryptdatawithHMACSHA256 function</a> and include in the client connector response.</p><p>Below shows an example connector test function from the Kianda demo microservice</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#c4a000> 		[FunctionName(&#34;connectorTest&#34;)]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>async</span> <span style=color:#000>Task</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>connectorTest</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>            [HttpTrigger(AuthorizationLevel.Function, &#34;post&#34;, Route = null)]</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>FromForm</span><span style=color:#000;font-weight:700>]</span><span style=color:#000>HttpRequest</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ILogger</span> <span style=color:#000>log</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// { SubscriptionID, UserID, RequestID, Action, EncryptedSettingsPropertyBag, RequestObject}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Empty</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>result</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>QueryResult</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>try</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>testBody</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ReadToEndAsync</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorRequest</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorRequest</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>testBody</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settings</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>DecryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>accessCode</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settings</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;accessCode&#34;</span><span style=color:#000;font-weight:700>];</span>                 
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>clientID</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settings</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;client_key&#34;</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>                <span style=color:#000>JObject</span> <span style=color:#000>tokenRequestObj</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;grant_type&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;authorization_code&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;client_id&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>clientID</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;redirect_uri&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;https://app.kianda.com/index.html&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;code&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>accessCode</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                <span style=color:#000>settings</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>GetToken</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tokenRequestObj</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>settings</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>//This is an example function that makes a request to oauth</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptDataWithHMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>requestId</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>//sign using the secret key and requestid </span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settingsobj</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SerializeObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>));</span> <span style=color:#8f5902;font-style:italic>//encrypt the settings</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settingsobj</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>signature</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Test completed successfully&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>ex</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>//dont forget to catch any exceptions and send them back with success false</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>LogError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ex</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>result1</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result1</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result1</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span><span style=color:#000;font-weight:700>=</span><span style=color:#000>signature</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Test has failed&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=metadata>Metadata</h3><p>The metadata function provides the list of available endpoints in the microservice and is called when selecting the datasource in a kianda process.</p><p>The steps for the metadata function are as follows:</p><ol><li><p>Get the client connector request</p></li><li><p>Decrypt the encrypted settings property bag recieved in the request</p></li><li><p>Create the Client connector response and include the tree</p><p>The following is an example of how to create the tree object in c#</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CityFields</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>CityFields</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span><span style=color:#000;font-weight:700>{[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>CityFields</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CountryFields</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span><span style=color:#000>CountryFields</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span><span style=color:#000;font-weight:700>{[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]=</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>nodes</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span><span style=color:#000>nodes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CountryFields</span> <span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;fields&#34;</span><span style=color:#000;font-weight:700>]=</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CountryFields</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span> <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span><span style=color:#000>nodes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span><span style=color:#000;font-weight:700>{</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;name&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;text&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;title&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;icon&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;type&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;nodes&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CityFields</span> <span style=color:#000;font-weight:700>},</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;fields&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CityFields</span> <span style=color:#000;font-weight:700>},</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;selectable&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span> 
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//create the tree root to be returned</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>root</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>[&#34;text&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Function&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>[&#34;icon&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;fa fa-bolt&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>[&#34;nodes&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>nodes</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><p>The above code renders the following result</p><img src=/images/example-tree-result.png><h3 id=query>Query</h3><p>The Query function is where the .</p><p>The steps for the query function are as follows</p><ol><li><p>Get the data from the <a href=#clientconnectorrequest>client connector request</a></p></li><li><p>Decrypt the encrypted settings property bag using your secret key and the <a href=#decrypt-string-with-aes256>Decrypt function</a></p></li><li><p>Get the <a href=#query-1>query object</a> from the request and call the function related to the query in the datasource.</p></li><li><p>Create <a href=#clientconnectorresponse>client connector response</a> and include success message to indicate query succeeded/failed.</p></li><li><p>Create the <a href=#queryresult>query result</a> object and include in the response</p></li><li><p>Sign the response using the <a href=#encrypt-data-with-hmacsha256>EncryptdatawithHMACSHA256 function</a> and include in the client connector response.</p></li></ol><p>Below is a code sample of the connector query function, it includes a check for filters sent from the query and a response.</p><p>This is just sample code and a fully featured connector would include sperate functions where the query would be executed and return a response.</p><p>A user can query this function for the list of countries, list of cities or pass a filter value which will return a list of cities for a specific country.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#c4a000>        [FunctionName(&#34;connectorQuery&#34;)]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>async</span> <span style=color:#000>Task</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>connectorQuery</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>            [HttpTrigger(AuthorizationLevel.Function, &#34;post&#34;, Route = null)]</span> <span style=color:#000>HttpRequest</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ILogger</span> <span style=color:#000>log</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>result</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000>QueryResult</span> <span style=color:#000>resultQuery</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>QueryResult</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>resultQuery</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Empty</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>myresponsestring</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Empty</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>try</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>testBody</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ReadToEndAsync</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorRequest</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorRequest</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>testBody</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>Query</span> <span style=color:#000>query</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settings</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>DecryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic>//demo object list creation</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;();</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>==</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CountriesList</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;();</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>country1</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;England&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>country2</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CountriesList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>country1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CountriesList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>country2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CountriesList</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CitysList</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;();</span> <span style=color:#8f5902;font-style:italic>//create a list of jobjects </span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city1</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;London&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city2</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Liverpool&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city3</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Dublin&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city4</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Cork&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city3</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city4</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#8f5902;font-style:italic>//check for conditions then return accordingly</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span> <span style=color:#000;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>null</span> <span style=color:#000;font-weight:700>&amp;&amp;</span> <span style=color:#000;font-weight:700>!</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IsNullOrEmpty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#8f5902;font-style:italic>//filtering the city list depending on the filter </span>
</span></span><span style=display:flex><span>                        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>j</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Where</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;()</span> <span style=color:#000;font-weight:700>==</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ToList</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                        <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>j</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#8f5902;font-style:italic>// if no filter return the full list of citys</span>
</span></span><span style=display:flex><span>                        <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settingsobj</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SerializeObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>));</span> <span style=color:#8f5902;font-style:italic>//encrypt the settings</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settingsobj</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptDataWithHMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>requestId</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>ex</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>resultExc</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>QueryResult</span> <span style=color:#000>resultQueryExc</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>QueryResult</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Exception occured; &#34;</span> <span style=color:#000;font-weight:700>+</span> <span style=color:#000>ex</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>signature</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=schemas>Schemas</h2><h4 id=clientconnectorrequest>ClientConnectorRequest</h4><p>Each function will receive a clientConnectorRequest payload.</p><p>Note, the Encrypted settings property bag will contain the encrypted datasource settings, it can only be decrypted using the secret key recieved when creating the client connector.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ClientConnectorRequest</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>subscriptionId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>userId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>requestId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>action</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Query</span> <span style=color:#000>query</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=query-1>Query</h4><p>The query object is included in the Client Connector Request</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Query</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>id</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>action</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>JObject</span> <span style=color:#000>info</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>orderBy</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>orderAscending</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>paging</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>rowLimit</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>fields</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Dictionary</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>object</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>mappings</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>filter</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>filterBy</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>filterMode</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=clientconnectorresponse>ClientConnectorResponse</h4><p>The Response again includes the encrypted settings property bag, the encrypt and decrypt functions are provided below.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ClientConnectorResponse</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>requestId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>QueryResult</span> <span style=color:#000>queryResult</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=queryresult>QueryResult</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>QueryResult</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>success</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>message</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>JObject</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>items</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>resultCount</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The query result contains typical response paramaters, Note the signature string needs to be created using hmac for validation.</p><h2 id=encryptiondecryption-functions>Encryption/Decryption Functions</h2><h3 id=encrypt-data-with-hmacsha256>Encrypt Data with HMACSHA256</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>EncryptDataWithHMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>value</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hash</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>HMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hashedByte</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>hash</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ComputeHash</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>value</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hashed</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Convert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToBase64String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hashedByte</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>hashed</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=decrypt-string-with-aes256>Decrypt String With AES256</h3><p>Since the settings property bag is encrypted and is sent with every request, a decryption function is provided below in C#</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>DecryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>cipherText</span><span style=color:#000;font-weight:700>)</span> 
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Where key is the unique secret key recieved when creating the client connector and cipherText is the encryptedSettingsPropertBag</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>iv</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>buffer</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Convert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FromBase64String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cipherText</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Aes</span> <span style=color:#000>aes</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Create</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>iv</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ICryptoTransform</span> <span style=color:#000>decryptor</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CreateDecryptor</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MemoryStream</span> <span style=color:#000>memoryStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MemoryStream</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buffer</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>CryptoStream</span> <span style=color:#000>cryptoStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CryptoStream</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>memoryStream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>decryptor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>CryptoStreamMode</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>StreamReader</span> <span style=color:#000>streamReader</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>cryptoStream</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>streamReader</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadToEnd</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=encrypt-string-with-aes256>Encrypt String With AES256</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>EncryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>plainText</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>iv</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Aes</span> <span style=color:#000>aes</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Create</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>iv</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#000>ICryptoTransform</span> <span style=color:#000>encryptor</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CreateEncryptor</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MemoryStream</span> <span style=color:#000>memoryStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MemoryStream</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>CryptoStream</span> <span style=color:#000>cryptoStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CryptoStream</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>memoryStream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>encryptor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>CryptoStreamMode</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>StreamWriter</span> <span style=color:#000>streamWriter</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamWriter</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>cryptoStream</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#000>streamWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>plainText</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                        <span style=color:#000>array</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>memoryStream</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToArray</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Convert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToBase64String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=security>Security</h2><p><strong>AES256:</strong> We use AES 256 to encrypt and decrypt to secure the data in the request and response so that even if the data is exposed, it cannot be decrypted without the right key. This is a symmetric encryption technique, which means the same key is used to encrypt and decrypt the data it is also a 2-way encryption algorithm.</p><img src=/images/AES_encryption.png style=zoom:150%><p><strong>HMAC:</strong> We use HMAC to sign the signature to make sure the response is coming from the correct end point. HMAC is also an encryption algorithm but unlike AES it’s a one-way encryption, meaning it isn’t decrypted on the other side. It’s used for verification, for example if we encrypt with HMAC our secret key with a request id and then do the same in the response, we can verify that we have got the response back from the correct endpoint and it has not been tampered with because both hashes will match. HMAC stands for <strong>H</strong>ash based <strong>M</strong>essage <strong>A</strong>uthentication <strong>C</strong>ode and the hash used is SHA256.</p><p>The main difference between the two is that AES we are encrypting and decrypting data, this is fast and secure for large data, with HMAC we use it to simultaneously verify both the data integrity and authenticity of a message.</p><img src=/images/Sha256_Hashing.png style=zoom:67%><p>After creating the client connector and the datasource, the next step is to look at how the connector can be used.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0e36c2bba8fb2a78a52ddf8919bc1590>2 - Connector API - Swagger</h1><h2 id=instructions-for-use>Instructions for use</h2><ol><li>Select a server on the left hand side below, server will be</li></ol><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/swagger/connectorAPI.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-8b3cea0752e92b2220a28206d9976d4d>3 - Creating a microservice</h1><h1 id=introduction>Introduction</h1><h2 id=create-a-microservice>Create a microservice</h2><p>Note that a microservice can be created in any programming language, the examples below are in c#, more languages will be added soon.</p><h3 id=requirements>Requirements</h3><p>The microservice should implement the following 3 functions.</p><ol><li>Test</li><li>MetaData</li><li>Query</li></ol><h3 id=test>Test</h3><p>The test function authenticates the user making the request and creates a token for any further requests to the datasource.</p><p>The steps for the test function are as follows</p><ol><li><p>Get the data from the <a href=#clientconnectorrequest>client connector request</a></p></li><li><p>Decrypt the encrypted settings property bag using your secret key and the <a href=#decrypt-string-with-aes256>Decrypt function</a></p></li><li><p>Authorize the user and create bearer token using oauth for example</p></li><li><p>Add the oauth token to the settings property bag and <a href=#encrypt-string-with-aes256>encrypt</a> using your secret key.</p></li><li><p>Create <a href=#clientconnectorresponse>client connector response</a> and include success message to indicate test succeeded/failed.</p></li><li><p>Sign the response using the <a href=#encrypt-data-with-hmacsha256>EncryptdatawithHMACSHA256 function</a> and include in the client connector response.</p><p>Below shows an example connector test function from the Kianda demo microservice</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#c4a000> 		[FunctionName(&#34;connectorTest&#34;)]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>async</span> <span style=color:#000>Task</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>connectorTest</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>            [HttpTrigger(AuthorizationLevel.Function, &#34;post&#34;, Route = null)]</span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>FromForm</span><span style=color:#000;font-weight:700>]</span><span style=color:#000>HttpRequest</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ILogger</span> <span style=color:#000>log</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#8f5902;font-style:italic>// { SubscriptionID, UserID, RequestID, Action, EncryptedSettingsPropertyBag, RequestObject}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Empty</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>result</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>QueryResult</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>try</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>testBody</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ReadToEndAsync</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorRequest</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorRequest</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>testBody</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settings</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>DecryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>accessCode</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settings</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;accessCode&#34;</span><span style=color:#000;font-weight:700>];</span>                 
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>clientID</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settings</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;client_key&#34;</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>                <span style=color:#000>JObject</span> <span style=color:#000>tokenRequestObj</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;grant_type&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;authorization_code&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;client_id&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>clientID</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;redirect_uri&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;https://app.kianda.com/index.html&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>                    [&#34;code&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>accessCode</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                <span style=color:#000>settings</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>GetToken</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tokenRequestObj</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>settings</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>//This is an example function that makes a request to oauth</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptDataWithHMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>requestId</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>//sign using the secret key and requestid </span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settingsobj</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SerializeObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>));</span> <span style=color:#8f5902;font-style:italic>//encrypt the settings</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settingsobj</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>signature</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Test completed successfully&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>ex</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>//dont forget to catch any exceptions and send them back with success false</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>LogError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ex</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>result1</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result1</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result1</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span><span style=color:#000;font-weight:700>=</span><span style=color:#000>signature</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Test has failed&#34;</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result1</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=metadata>Metadata</h3><p>The metadata function provides the list of available endpoints in the microservice and is called when selecting the datasource in a kianda process.</p><p>The steps for the metadata function are as follows:</p><ol><li><p>Get the client connector request</p></li><li><p>Decrypt the encrypted settings property bag recieved in the request</p></li><li><p>Create the Client connector response and include the tree</p><p>The following is an example of how to create the tree object in c#</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CityFields</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>CityFields</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span><span style=color:#000;font-weight:700>{[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>CityFields</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;text&#34;</span> <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CountryFields</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span><span style=color:#000>CountryFields</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span><span style=color:#000;font-weight:700>{[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]=</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>nodes</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span><span style=color:#000>nodes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;title&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CountryFields</span> <span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;fields&#34;</span><span style=color:#000;font-weight:700>]=</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CountryFields</span><span style=color:#000;font-weight:700>},</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span> <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span><span style=color:#000>nodes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span><span style=color:#000;font-weight:700>{</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;name&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;text&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;title&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;icon&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;type&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;nodes&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CityFields</span> <span style=color:#000;font-weight:700>},</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;fields&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>CityFields</span> <span style=color:#000;font-weight:700>},</span> 
</span></span><span style=display:flex><span><span style=color:#c4a000>              [&#34;selectable&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span> 
</span></span><span style=display:flex><span>          <span style=color:#000;font-weight:700>});</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//create the tree root to be returned</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>root</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>[&#34;text&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Function&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>[&#34;icon&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;fa fa-bolt&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>[&#34;nodes&#34;]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JArray</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>nodes</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>};</span>
</span></span></code></pre></div><p>The above code renders the following result</p><img src=/images/example-tree-result.png><h3 id=query>Query</h3><p>The Query function is where the .</p><p>The steps for the query function are as follows</p><ol><li><p>Get the data from the <a href=#clientconnectorrequest>client connector request</a></p></li><li><p>Decrypt the encrypted settings property bag using your secret key and the <a href=#decrypt-string-with-aes256>Decrypt function</a></p></li><li><p>Get the <a href=#query-1>query object</a> from the request and call the function related to the query in the datasource.</p></li><li><p>Create <a href=#clientconnectorresponse>client connector response</a> and include success message to indicate query succeeded/failed.</p></li><li><p>Create the <a href=#queryresult>query result</a> object and include in the response</p></li><li><p>Sign the response using the <a href=#encrypt-data-with-hmacsha256>EncryptdatawithHMACSHA256 function</a> and include in the client connector response.</p></li></ol><p>Below is a code sample of the connector query function, it includes a check for filters sent from the query and a response.</p><p>This is just sample code and a fully featured connector would include sperate functions where the query would be executed and return a response.</p><p>A user can query this function for the list of countries, list of cities or pass a filter value which will return a list of cities for a specific country.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#c4a000>        [FunctionName(&#34;connectorQuery&#34;)]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>async</span> <span style=color:#000>Task</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>connectorQuery</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>            [HttpTrigger(AuthorizationLevel.Function, &#34;post&#34;, Route = null)]</span> <span style=color:#000>HttpRequest</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ILogger</span> <span style=color:#000>log</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>result</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000>QueryResult</span> <span style=color:#000>resultQuery</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>QueryResult</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>resultQuery</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Empty</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>myresponsestring</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Empty</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>try</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>testBody</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>await</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Body</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ReadToEndAsync</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorRequest</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>ClientConnectorRequest</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>testBody</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>Query</span> <span style=color:#000>query</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settings</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>DeserializeObject</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#000>DecryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic>//demo object list creation</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;();</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;(</span><span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>==</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CountriesList</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;();</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>country1</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;England&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>country2</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CountriesList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>country1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CountriesList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>country2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CountriesList</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>CitysList</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;();</span> <span style=color:#8f5902;font-style:italic>//create a list of jobjects </span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city1</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;London&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city2</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Liverpool&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city3</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Dublin&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>city4</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>JObject</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Cork&#34;</span> <span style=color:#000;font-weight:700>};</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city2</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city3</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                    <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Add</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>city4</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#8f5902;font-style:italic>//check for conditions then return accordingly</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span> <span style=color:#000;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>null</span> <span style=color:#000;font-weight:700>&amp;&amp;</span> <span style=color:#000;font-weight:700>!</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IsNullOrEmpty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#8f5902;font-style:italic>//filtering the city list depending on the filter </span>
</span></span><span style=display:flex><span>                        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>j</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Where</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>x</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetValue</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>Value</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;()</span> <span style=color:#000;font-weight:700>==</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>ToList</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                        <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>j</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#8f5902;font-style:italic>// if no filter return the full list of citys</span>
</span></span><span style=display:flex><span>                        <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>items</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>CitysList</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>settingsobj</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>JsonConvert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SerializeObject</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>));</span> <span style=color:#8f5902;font-style:italic>//encrypt the settings</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>settingsobj</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>EncryptDataWithHMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>SECRET_KEY</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>requestId</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>catch</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Exception</span> <span style=color:#000>ex</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ClientConnectorResponse</span> <span style=color:#000>resultExc</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ClientConnectorResponse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>QueryResult</span> <span style=color:#000>resultQueryExc</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>QueryResult</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>queryResult</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Exception occured; &#34;</span> <span style=color:#000;font-weight:700>+</span> <span style=color:#000>ex</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Message</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>signature</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>signature</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>resultExc</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=schemas>Schemas</h2><h4 id=clientconnectorrequest>ClientConnectorRequest</h4><p>Each function will receive a clientConnectorRequest payload.</p><p>Note, the Encrypted settings property bag will contain the encrypted datasource settings, it can only be decrypted using the secret key recieved when creating the client connector.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span>       <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ClientConnectorRequest</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>subscriptionId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>userId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>requestId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>action</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Query</span> <span style=color:#000>query</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=query-1>Query</h4><p>The query object is included in the Client Connector Request</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Query</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>id</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>action</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>JObject</span> <span style=color:#000>info</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>orderBy</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>orderAscending</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>paging</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>rowLimit</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>fields</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>Dictionary</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>object</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>mappings</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>filter</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>filterBy</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>filterMode</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=clientconnectorresponse>ClientConnectorResponse</h4><p>The Response again includes the encrypted settings property bag, the encrypt and decrypt functions are provided below.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ClientConnectorResponse</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>requestId</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>encryptedSettingsPropertyBag</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>QueryResult</span> <span style=color:#000>queryResult</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=queryresult>QueryResult</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>QueryResult</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>success</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>message</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>JObject</span> <span style=color:#000>data</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>JObject</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>items</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>resultCount</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>signature</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#204a87;font-weight:700>get</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>The query result contains typical response paramaters, Note the signature string needs to be created using hmac for validation.</p><h2 id=encryptiondecryption-functions>Encryption/Decryption Functions</h2><h3 id=encrypt-data-with-hmacsha256>Encrypt Data with HMACSHA256</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>private</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>EncryptDataWithHMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>value</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hash</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>HMACSHA256</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)))</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hashedByte</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>hash</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ComputeHash</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>value</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hashed</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Convert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToBase64String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hashedByte</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>hashed</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=decrypt-string-with-aes256>Decrypt String With AES256</h3><p>Since the settings property bag is encrypted and is sent with every request, a decryption function is provided below in C#</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>DecryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>cipherText</span><span style=color:#000;font-weight:700>)</span> 
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Where key is the unique secret key recieved when creating the client connector and cipherText is the encryptedSettingsPropertBag</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>iv</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>buffer</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Convert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FromBase64String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cipherText</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Aes</span> <span style=color:#000>aes</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Create</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>iv</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>                <span style=color:#000>ICryptoTransform</span> <span style=color:#000>decryptor</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CreateDecryptor</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MemoryStream</span> <span style=color:#000>memoryStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MemoryStream</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buffer</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>CryptoStream</span> <span style=color:#000>cryptoStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CryptoStream</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>memoryStream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>decryptor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>CryptoStreamMode</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>StreamReader</span> <span style=color:#000>streamReader</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamReader</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>cryptoStream</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>streamReader</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ReadToEnd</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=encrypt-string-with-aes256>Encrypt String With AES256</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span><span style=color:#204a87;font-weight:700>public</span> <span style=color:#204a87;font-weight:700>static</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>EncryptStringWithAES256</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>plainText</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>iv</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>];</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>[]</span> <span style=color:#000>array</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Aes</span> <span style=color:#000>aes</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Create</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>Encoding</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UTF8</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetBytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>iv</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#000>ICryptoTransform</span> <span style=color:#000>encryptor</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CreateEncryptor</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>aes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>IV</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MemoryStream</span> <span style=color:#000>memoryStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>MemoryStream</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                    <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>CryptoStream</span> <span style=color:#000>cryptoStream</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>CryptoStream</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>memoryStream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>encryptor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>CryptoStreamMode</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                        <span style=color:#204a87;font-weight:700>using</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>StreamWriter</span> <span style=color:#000>streamWriter</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>StreamWriter</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>Stream</span><span style=color:#000;font-weight:700>)</span><span style=color:#000>cryptoStream</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                            <span style=color:#000>streamWriter</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>plainText</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                        <span style=color:#000>array</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>memoryStream</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToArray</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>                    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>            <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Convert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ToBase64String</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=security>Security</h2><p><strong>AES256:</strong> We use AES 256 to encrypt and decrypt to secure the data in the request and response so that even if the data is exposed, it cannot be decrypted without the right key. This is a symmetric encryption technique, which means the same key is used to encrypt and decrypt the data it is also a 2-way encryption algorithm.</p><img src=/images/AES_encryption.png style=zoom:150%><p><strong>HMAC:</strong> We use HMAC to sign the signature to make sure the response is coming from the correct end point. HMAC is also an encryption algorithm but unlike AES it’s a one-way encryption, meaning it isn’t decrypted on the other side. It’s used for verification, for example if we encrypt with HMAC our secret key with a request id and then do the same in the response, we can verify that we have got the response back from the correct endpoint and it has not been tampered with because both hashes will match. HMAC stands for <strong>H</strong>ash based <strong>M</strong>essage <strong>A</strong>uthentication <strong>C</strong>ode and the hash used is SHA256.</p><p>The main difference between the two is that AES we are encrypting and decrypting data, this is fast and secure for large data, with HMAC we use it to simultaneously verify both the data integrity and authenticity of a message.</p><img src=/images/Sha256_Hashing.png style=zoom:67%><p>After creating the client connector and the datasource, the next step is to look at how the connector can be used.</p><h2 id=sample-schemas>Sample schemas</h2><h3 id=related-to-metadata-hook>Related to metaData hook</h3><h4 id=tree-schema>Tree schema</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h4 id=datasource-schema>Datasource schema</h4><p>same structure used in both query and query success data will vary slightly</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2fe2d2c7-4feb-4c92-ac4c-fed4623d2d6e&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Demo Connector&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;client&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;typeIcon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;http://localhost:4171/public-file/322f14a6-63a0-4c68-b53e-4ca041c0e9ae/Geo-Connector-Icon.png&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;typeTitle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Demo Connector&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;candelete&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;readOnly&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ready&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;useConnector&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;connectorId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;clientConnectorId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;19275478-68a9-43be-b8fb-54dc310cc0d6&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modified&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-11-11T15:12:44.173Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableB2B&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableFiltering&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;b2bMappings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modifiedBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;5650d471-8c41-49b6-8f72-b77dddf3b956&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;admins&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;allowedUsers&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;exclusionUsers&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=related-to-query-hook>Related to query hook</h3><h4 id=query-schema>Query schema</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;action&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;select&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;info&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Country&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filterBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filterMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;startswith&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;rowLimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>50</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;orderAscending&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=rule-schema>Rule schema</h4><p>Will be similar in the query success hook</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country Selection&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;countriesSelect&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;help&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fields/field-list&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;showTitle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;visible&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enabled&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;submitOffline&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;required&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;listsource&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;datasource&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;displayformat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;dropdownlist&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;choices&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Choice 1\nChoice 2\nChoice 3&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filterMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;startswith&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nativeMobile&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;offlineCache&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;list&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;valueField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;displayField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;class&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;customCssClass&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;usersValue&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;parentField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;parentForm&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;5af0c34e-28ea-4404-bba3-a8cf2df8eaff&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;datasource&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2fe2d2c7-4feb-4c92-ac4c-fed4623d2d6e&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=process-schema>Process schema</h4><p>Will be similar in the query success hook</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;processVersion&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1.1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;processName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;connector-example&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isCreated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isOfflineCreated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isOfflineUpdated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;uniqueID&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;45758d2b-f713-44c9-81dc-0e4cb7618902&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;connector example&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Process&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;connector-example&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;desc&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1.0&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modified&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-11-14T09:33:46.254Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;created&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-11-11T15:13:28.108Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;form 1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;securityMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableSecurity&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;deleted&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;rejected&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;completed&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;keepRuleExecutionOrder&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;yes&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;buttonDisplayFlag&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;mobileNav&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;yes&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;comments&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;offline-tag&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;45758d2b-f713-44c9-81dc-0e4cb7618902&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;partnerId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;instanceIDFormat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;customInstanceIDFormat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isPartner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isDraft&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;publish&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;allowNew&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;visMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;group&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fieldsUpdated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modifiedBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;createdBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;currentForm&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;5af0c34e-28ea-4404-bba3-a8cf2df8eaff&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;partner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=related-to-query-success-hook>Related to query success hook</h3><h4 id=datasource-schema-1>Datasource schema</h4><h4 id=result-schema>Result schema</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;success&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;items&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;Country&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;Country&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;meta&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;cache-control&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no-cache,no-cache, no-store&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;content-length&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;173&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;content-type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;application/json; charset=utf-8&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;expires&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;-1,-1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;pragma&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no-cache,no-cache&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-cc4025fc31d90a7118b94d44ba054188>4 - Sample schemas</h1><h1 id=introduction>Introduction</h1><p>This page features sample schemas for parameters used in the <a href=/docs/low-code/client-connector/how-to-create/#query-code>Query Code</a> tab when creating a customised data connector.</p><p>Each section below features exemplar schemas and parameters to help you when creating code for your hooks in the <strong>Query Code</strong> tab.</p><h2 id=metadata-hook-related-schemas>Metadata hook related schemas</h2><p>The <strong>Metadata hook</strong> in the <a href=/docs/low-code/client-connector/how-to-create/#query-code>Query Code</a> tab typically looks like the following, using two parameters: <code>tree</code> and <code>datasource</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-handlebars data-lang=handlebars><span style=display:flex><span><span style=color:#000>metaData(tree, datasource) </span><span style=color:#a40000>{</span><span style=color:#000>
</span></span></span><span style=display:flex><span><span style=color:#000>    return tree;
</span></span></span><span style=display:flex><span><span style=color:#000>  }
</span></span></span></code></pre></div><p>Sample schemas for <a href=#tree-schema><code>tree</code></a> and <a href=#datasource-schema><code>datasource</code></a> are available by clicking on the links.</p><h3 id=tree-schema>Tree schema</h3><p>This sample tree schema is based on the github repository documentation <a href=https://github.com/jonmiles/bootstrap-treeview#bootstrap-tree-view>Bootstrap Tree View package</a>. Click on the link for more details on hierarchical tree structures.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fa fa-globe&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nodes&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;City&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;icon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectable&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>]</span>
</span></span></code></pre></div><h3 id=datasource-schema>Datasource schema</h3><p><strong>Note</strong>: The same structure below can be used used in both <strong>Query hooks</strong> and <strong>Query success hooks</strong>, although data will vary slightly.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2fe2d2c7-4feb-4c92-ac4c-fed4623d2d6e&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Demo Connector&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;client&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;typeIcon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;http://localhost:4171/public-file/322f14a6-63a0-4c68-b53e-4ca041c0e9ae/Geo-Connector-Icon.png&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;typeTitle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Demo Connector&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;candelete&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;readOnly&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ready&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;useConnector&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;connectorId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;clientConnectorId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;19275478-68a9-43be-b8fb-54dc310cc0d6&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modified&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-11-11T15:12:44.173Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableB2B&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableFiltering&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;b2bMappings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modifiedBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;5650d471-8c41-49b6-8f72-b77dddf3b956&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;admins&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;allowedUsers&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;exclusionUsers&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=query-hook-related-schemas>Query hook related schemas</h2><p>The <strong>Query hook</strong> in the <a href=/docs/low-code/client-connector/how-to-create/#query-code>Query Code</a> tab typically looks like the following, using four parameters: <code>datasource, query</code>, <code>rule</code> and <code>process</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>filter</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>conditions</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>].</span><span style=color:#000>arg2</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>value</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>query</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Sample schemas each are available by clicking on the relevant links: <a href=#datasource-schema><code>datasource</code></a>, <a href=#query-schema><code>query</code></a>, <a href=#rule-schema><code>rule</code></a>, and <a href=#-process-schema><code>process</code></a> are available by clicking on the links.</p><h3 id=query-schema>Query schema</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;action&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;select&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;info&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Country&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filterBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filterMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;startswith&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;rowLimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>50</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;orderAscending&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=rule-schema>Rule schema</h3><p><strong>Note</strong>: This is similar to the <code>rule</code> used in the <strong>Query success hook</strong>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country Selection&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;countriesSelect&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;help&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fields/field-list&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;showTitle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;visible&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enabled&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;submitOffline&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;required&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;listsource&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;datasource&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;displayformat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;dropdownlist&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;choices&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Choice 1\nChoice 2\nChoice 3&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filterMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;startswith&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;nativeMobile&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;offlineCache&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;list&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;valueField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;displayField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;class&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;customCssClass&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;usersValue&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;parentField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;parentForm&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;5af0c34e-28ea-4404-bba3-a8cf2df8eaff&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;datasource&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2fe2d2c7-4feb-4c92-ac4c-fed4623d2d6e&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=process-schema>Process schema</h3><p><strong>Note</strong>: This is similar to the <code>process</code> used in the <strong>Query success hook</strong>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;processVersion&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1.1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;processName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;connector-example&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isCreated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isOfflineCreated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isOfflineUpdated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;uniqueID&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;45758d2b-f713-44c9-81dc-0e4cb7618902&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;connector example&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Process&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;connector-example&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;desc&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1.0&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modified&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-11-14T09:33:46.254Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;created&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-11-11T15:13:28.108Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;form 1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;securityMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableSecurity&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;deleted&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;rejected&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;completed&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;keepRuleExecutionOrder&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;yes&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;buttonDisplayFlag&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;mobileNav&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;yes&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;comments&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;offline-tag&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;45758d2b-f713-44c9-81dc-0e4cb7618902&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;partnerId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;instanceIDFormat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;customInstanceIDFormat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isPartner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isDraft&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;publish&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;allowNew&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;visMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;group&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fieldsUpdated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modifiedBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;createdBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;currentForm&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;5af0c34e-28ea-4404-bba3-a8cf2df8eaff&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;partner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=query-success-hook-related-schemas>Query success hook related schemas</h2><p>The <strong>Query success hook</strong> in the <a href=/docs/low-code/client-connector/how-to-create/#query-code>Query Code</a> tab typically looks like the following, using four parameters: <code>datasource, result</code>, <code>rule</code> and <code>process</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c# data-lang=c#><span style=display:flex><span> <span style=color:#000>querySuccess</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datasource</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>rule</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>process</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// this.get(&#34;dataservice&#34;).mapSuccess(result,rule,process); //uncomment to use default mapping behaviour</span>
</span></span><span style=display:flex><span>   <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Sample schemas each are available by clicking on the relevant links: <a href=#datasource-schema><code>datasource</code></a>, <a href=#result-schema><code>result</code></a>, <a href=#rule-schema><code>rule</code></a>, and <a href=#-process-schema><code>process</code></a> are available by clicking on the links.</p><h4 id=result-schema>Result schema</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;success&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;items&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;Country&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;England&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;Country&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Ireland&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;meta&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;cache-control&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no-cache,no-cache, no-store&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;content-length&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;173&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;content-type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;application/json; charset=utf-8&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;expires&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;-1,-1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;pragma&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no-cache,no-cache&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=whats-next--idea-iconimages18png>What&rsquo;s next <img src=/images/18.png alt="Idea icon"></h3><p>To discover how to use your customised data connector widget in Kianda process design, go to <a href=/docs/platform/application-designer/>Kianda application designer</a>.</p><p>To create other widgets go to <a href=/docs/low-code/field-widget/>Custom field widget</a>, <a href=/docs/low-code/dashboard-widget/>Custom dashboard widget</a> and <a href=/docs/low-code/rule-widget/>Custom rule widget</a> pages to find out more.</p><h3 id=to-return-to-the-previous-pages-click-on-the-links-below--idea-iconimages10png><strong>To return to the previous pages click on the links below</strong> <img src=/images/10.png alt="Idea icon"></h3><ul><li><a href=/docs/low-code/client-connector/how-to-create/>How to create a client connector</a></li><li><a href=/docs/low-code/client-connector/create-microservice/>Create a microservice</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-36fafe16640322444ebf44736c4a8f77>5 - How to use the client connector</h1><h1 id=introduction>Introduction</h1><p>The <strong>Client connector</strong> is designed to allow users to create custom datasources to meet business requirements, and allow more flexibility by providing a built-in editor to edit the UI and JavaScript code for the connector. Kianda users with <strong>Administrator</strong> or <strong>Developer</strong> roles, who have some experience of coding will be able to use and access this new feature.</p><p>To access the <strong>Client connector</strong> go to the left-hand <strong>side menu</strong>, and click on <strong>Administration</strong> and <strong>Developer</strong>.</p><h2 id=settings-page>Settings page</h2><img src=/images/ConnectorTabsScreen.png style="zoom:100%;border:2px solid #000"><h4 id=queryjs>Query.js</h4><p>The query hook gets datasource,query rule and process as parameters, below is an outline in json of what to expect for each of these,
the developer can use any of the parameters to alter the query going to the microservice.</p><p><strong>datasource</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;GeoConnector&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;client&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;typeIcon&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;http://localhost:4171/public-file/322f14a6-63a0-4c68-b53e-4ca041c0e9ae/Geo-Connector-Icon.png&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;typeTitle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;GeoConnector&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;candelete&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;readOnly&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ready&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;useConnector&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;connectorId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;clientConnectorId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;74f7f976-b9d9-42ae-bfe2-c7731e9f1a58&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>&#34;modified&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-09-08T16:18:58.263Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;enableB2B&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;enableB2BDefaultQuery&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;b2bMappings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><strong>query</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span> 
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>&#34;action&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;select&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;info&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fields&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;Country&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filterBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;filterMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;startswith&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;rowLimit&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>50</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;orderBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;orderAscending&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><strong>rule</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>	<span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>   		<span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    	<span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     	<span style=color:#204a87;font-weight:700>&#34;help&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;fields/field-list&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     	<span style=color:#204a87;font-weight:700>&#34;showTitle&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     	<span style=color:#204a87;font-weight:700>&#34;visible&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;enabled&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     	<span style=color:#204a87;font-weight:700>&#34;submitOffline&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     	<span style=color:#204a87;font-weight:700>&#34;required&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>     	<span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;listsource&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;datasource&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;displayformat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;multiselect&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;choices&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Choice 1\\nChoice 2\\nChoice 3&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;filterMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;startswith&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;nativeMobile&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;offlineCache&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>       	<span style=color:#204a87;font-weight:700>&#34;list&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>          	<span style=color:#204a87;font-weight:700>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        	<span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Get Countries&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         	<span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;STRUCTURE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>         	<span style=color:#204a87;font-weight:700>&#34;filter&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>        	<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        	<span style=color:#204a87;font-weight:700>&#34;displayField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        	<span style=color:#204a87;font-weight:700>&#34;valueField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Country&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        	<span style=color:#204a87;font-weight:700>&#34;sortBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        	<span style=color:#204a87;font-weight:700>&#34;sortByDir&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;asc&#34;</span>
</span></span><span style=display:flex><span>      	<span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;class&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;usersValue&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;parentField&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      	<span style=color:#204a87;font-weight:700>&#34;parentForm&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2229c95f-8834-432b-8c70-a2eb3d895e80&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>   		<span style=color:#204a87;font-weight:700>&#34;datasource&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;0604527b-5bbd-4af6-955e-47929cc569b1&#34;</span>
</span></span><span style=display:flex><span>    	<span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><strong>process</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;processVersion&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2.0&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;processName&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;countries-and-cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isCreated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isOfflineCreated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isOfflineUpdated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;uniqueID&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;d6a00acb-41a2-4109-9b7a-66584dbf0559&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;title&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Countries and cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Process&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;countries-and-cities&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;desc&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;version&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1.0&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modified&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-09-19T15:05:50.251Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;created&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-09-05T10:20:54.786Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;status&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;form 1&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;securityMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;enableSecurity&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;deleted&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;rejected&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;completed&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;settings&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;keepRuleExecutionOrder&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;yes&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;buttonDisplayFlag&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;onload&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;hideTabs&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;hideNav&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;enableAnonymous&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;mobileNav&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;deleteMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;any&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;notifyUser&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;yes&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;preventUnsavedNav&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;no&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;selectedTabtheme&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;bg-default&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;completedTabtheme&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;bg-default&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;comments&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;offline-tag&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;d6a00acb-41a2-4109-9b7a-66584dbf0559&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;partnerId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;instanceIDFormat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;default&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;customInstanceIDFormat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isPartner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;isDraft&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;publish&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;allowNew&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;visMode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;group&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;fieldsUpdated&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2022-09-19T15:05:51.267Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;modifiedBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;createdBy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;currentForm&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2229c95f-8834-432b-8c70-a2eb3d895e80&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;partner&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;owners&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/swagger/connectorAPI.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/kiandaBPM aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/kiandaBPM aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/uDSW6qcYub aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Kianda Technologies All Rights Reserved</small>
<small class=ml-1><a href=https://www.kianda.com/privacy target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script>
<script type=text/javascript language=javascript>$(document).ready(function(){var e=$("#td-sidebar-menu a.active");e&&e.length>0&&e[0].scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})})</script><script>(function(e,t,n,s,o,i){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:1880292,hjsv:6},o=t.getElementsByTagName("head")[0],i=t.createElement("script"),i.async=1,i.src=n+e._hjSettings.hjid+s+e._hjSettings.hjsv,o.appendChild(i)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=")</script></body></html>